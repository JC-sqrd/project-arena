[gd_scene load_steps=29 format=3 uid="uid://c4234y32d7c7u"]

[ext_resource type="Script" uid="uid://df3mwd5sdgedk" path="res://Scripts/Combat/MeleeWeapons/MeleeWeapon.gd" id="1_x277f"]
[ext_resource type="Script" uid="uid://bgka26pbphks7" path="res://Scripts/StatSystem/Stat.gd" id="2_5bq0p"]
[ext_resource type="Script" uid="uid://bg43jxy7gyts0" path="res://Scripts/Ability System/Spawnables/SpawnableEnterFilter/SpawnableEnterFilter.gd" id="2_5i3hs"]
[ext_resource type="Texture2D" uid="uid://vdm436vnjrbj" path="res://Sprites/Weapons/Long Sword/Longsword.png" id="2_g1ygs"]
[ext_resource type="Script" uid="uid://2vlwp08ancca" path="res://Scripts/StatSystem/Stats/GetActorStatScaler.gd" id="3_0cynv"]
[ext_resource type="Script" uid="uid://cbdnn38awoh2q" path="res://Scripts/StatSystem/Stats/GetActorStatAdder.gd" id="3_1clad"]
[ext_resource type="Script" uid="uid://cmdw2c71721x0" path="res://Scripts/Combat/Animation/AttackAnimation.gd" id="4_5i3hs"]
[ext_resource type="Texture2D" uid="uid://bjghiliwmv17p" path="res://Sprites/Weapons/Long Sword/Longsword Attack.png" id="4_hpkqv"]
[ext_resource type="Script" uid="uid://c4n03mihb0axg" path="res://Scripts/StatSystem/Stats/GetActorStatMult.gd" id="4_o5g0w"]
[ext_resource type="Script" uid="uid://dm3uuggj1g47y" path="res://Scripts/Combat/HitListener.gd" id="4_yxwxf"]
[ext_resource type="Script" uid="uid://c8sj8b1npavnd" path="res://Scripts/Combat/CombatEffects/DamageEffect.gd" id="5_0cynv"]
[ext_resource type="PackedScene" uid="uid://duqgnw31hkjpj" path="res://Scenes/Abilities/Emit Abilities/Piercing Strike/ability_piercing_strike.tscn" id="12_dua8e"]
[ext_resource type="Script" uid="uid://b41oadkxkerfk" path="res://Scripts/Combat/CombatEffects/BonusValueChecks/DistanceCheck.gd" id="12_uan7s"]
[ext_resource type="Script" uid="uid://dmjo067f80ntw" path="res://Scripts/Combat/CombatEffects/KnockbackEffect.gd" id="12_vqv8n"]
[ext_resource type="Script" uid="uid://cp6un5w7sjul2" path="res://Scripts/Ability System/AbilityAnimation/WeaponAbilityAnimatedSprite2D.gd" id="13_6xb33"]

[sub_resource type="Resource" id="Resource_hpkqv"]
script = ExtResource("2_5i3hs")
metadata/_custom_type_script = "uid://bg43jxy7gyts0"

[sub_resource type="AtlasTexture" id="AtlasTexture_hpkqv"]
atlas = ExtResource("4_hpkqv")
region = Rect2(1152, 0, 384, 384)

[sub_resource type="AtlasTexture" id="AtlasTexture_dua8e"]
atlas = ExtResource("4_hpkqv")
region = Rect2(1536, 0, 384, 384)

[sub_resource type="AtlasTexture" id="AtlasTexture_6xb33"]
atlas = ExtResource("4_hpkqv")
region = Rect2(1920, 0, 384, 384)

[sub_resource type="AtlasTexture" id="AtlasTexture_vqv8n"]
atlas = ExtResource("4_hpkqv")
region = Rect2(2304, 0, 384, 384)

[sub_resource type="AtlasTexture" id="AtlasTexture_uan7s"]
atlas = ExtResource("4_hpkqv")
region = Rect2(2688, 0, 384, 384)

[sub_resource type="AtlasTexture" id="AtlasTexture_lxxdf"]
atlas = ExtResource("4_hpkqv")
region = Rect2(3072, 0, 384, 384)

[sub_resource type="AtlasTexture" id="AtlasTexture_xvvoo"]
atlas = ExtResource("4_hpkqv")
region = Rect2(0, 0, 384, 384)

[sub_resource type="AtlasTexture" id="AtlasTexture_mvr6p"]
atlas = ExtResource("4_hpkqv")
region = Rect2(384, 0, 384, 384)

[sub_resource type="AtlasTexture" id="AtlasTexture_yckbx"]
atlas = ExtResource("4_hpkqv")
region = Rect2(768, 0, 384, 384)

[sub_resource type="SpriteFrames" id="SpriteFrames_o6gyd"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_hpkqv")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_dua8e")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_6xb33")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_vqv8n")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_uan7s")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_lxxdf")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_xvvoo")
}],
"loop": false,
"name": &"attack",
"speed": 12.0
}, {
"frames": [],
"loop": false,
"name": &"default",
"speed": 12.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_xvvoo")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_mvr6p")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_yckbx")
}],
"loop": false,
"name": &"windup",
"speed": 12.0
}]

[sub_resource type="CircleShape2D" id="CircleShape2D_1clad"]
radius = 180.0

[sub_resource type="SpriteFrames" id="SpriteFrames_vqv8n"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": null
}, {
"duration": 1.0,
"texture": null
}, {
"duration": 1.0,
"texture": null
}, {
"duration": 1.0,
"texture": null
}],
"loop": false,
"name": &"cast_animation",
"speed": 12.0
}, {
"frames": [],
"loop": false,
"name": &"default",
"speed": 5.0
}]

[node name="LongSword" type="Area2D" node_paths=PackedStringArray("attack_damage", "attack_speed_stat", "weapon_ability", "hit_listener")]
collision_mask = 2
monitorable = false
script = ExtResource("1_x277f")
hit_coll_enabled_time = 0.3
filter = SubResource("Resource_hpkqv")
attack_damage = NodePath("Damage")
attack_speed_stat = NodePath("AttackSpeed")
attack_windup_time = 0.25
weapon_ability = NodePath("AbilityPiercingStrike")
hit_listener = NodePath("HitListener")
equipment_name = "Long Sword"
string_id = "long_sword"
equipment_icon = ExtResource("2_g1ygs")

[node name="AnimatedSprite2D" type="AnimatedSprite2D" parent="." node_paths=PackedStringArray("weapon")]
position = Vector2(168, 0)
sprite_frames = SubResource("SpriteFrames_o6gyd")
animation = &"windup"
script = ExtResource("4_5i3hs")
weapon = NodePath("..")

[node name="AttackTimer" type="Timer" parent="."]

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
position = Vector2(185, 0)
shape = SubResource("CircleShape2D_1clad")

[node name="Damage" type="Node" parent="."]
script = ExtResource("2_5bq0p")
stat_value = 10.0
metadata/_custom_type_script = "uid://bgka26pbphks7"

[node name="GetActorStatAdder" type="Node" parent="Damage" node_paths=PackedStringArray("stat")]
script = ExtResource("3_1clad")
stat = NodePath("..")
scale_with_stat_id = "attack_damage"
metadata/_custom_type_script = "uid://cbdnn38awoh2q"

[node name="GetActorStatMult" type="Node" parent="Damage" node_paths=PackedStringArray("stat")]
script = ExtResource("4_o5g0w")
stat = NodePath("..")
scale_with_stat_id = "attack_damage_mult"
metadata/_custom_type_script = "uid://c4n03mihb0axg"

[node name="AttackSpeed" type="Node" parent="."]
script = ExtResource("2_5bq0p")
stat_value = 1.0
metadata/_custom_type_script = "uid://bgka26pbphks7"

[node name="GetActorStatAdder" type="Node" parent="AttackSpeed" node_paths=PackedStringArray("stat")]
script = ExtResource("3_1clad")
stat = NodePath("..")
scale_with_stat_id = "attack_speed"
metadata/_custom_type_script = "uid://cbdnn38awoh2q"

[node name="GetActorStatMult" type="Node" parent="AttackSpeed" node_paths=PackedStringArray("stat")]
script = ExtResource("4_o5g0w")
stat = NodePath("..")
scale_with_stat_id = "attack_speed_mult"
ratio = 0.85
metadata/_custom_type_script = "uid://c4n03mihb0axg"

[node name="ActorArmorPen" type="Node" parent="."]
script = ExtResource("2_5bq0p")
metadata/_custom_type_script = "uid://bgka26pbphks7"

[node name="GetActorStatScaler" type="Node" parent="ActorArmorPen" node_paths=PackedStringArray("stat")]
script = ExtResource("3_0cynv")
stat = NodePath("..")
scale_with_stat_id = "armor_pen"
metadata/_custom_type_script = "uid://2vlwp08ancca"

[node name="ActorCrit" type="Node" parent="."]
script = ExtResource("2_5bq0p")
metadata/_custom_type_script = "uid://bgka26pbphks7"

[node name="GetActorStatScaler" type="Node" parent="ActorCrit" node_paths=PackedStringArray("stat")]
script = ExtResource("3_0cynv")
stat = NodePath("..")
scale_with_stat_id = "crit_chance"
metadata/_custom_type_script = "uid://2vlwp08ancca"

[node name="HitListener" type="Node" parent="."]
script = ExtResource("4_yxwxf")
metadata/_custom_type_script = "uid://dm3uuggj1g47y"

[node name="DamageEffect" type="Node" parent="HitListener" node_paths=PackedStringArray("damage_stat", "penetration_stat", "crit_chance_stat")]
script = ExtResource("5_0cynv")
damage_stat = NodePath("../../Damage")
penetration_stat = NodePath("../../ActorArmorPen")
crit_chance_stat = NodePath("../../ActorCrit")
metadata/_custom_type_script = "uid://c8sj8b1npavnd"

[node name="DistanceCheck" type="Node" parent="HitListener/DamageEffect" node_paths=PackedStringArray("stat")]
script = ExtResource("12_uan7s")
stat = NodePath("Stat")
distance = 200.0
greater_than = true
is_multiplier = true
metadata/_custom_type_script = "uid://b41oadkxkerfk"

[node name="Stat" type="Node" parent="HitListener/DamageEffect/DistanceCheck"]
script = ExtResource("2_5bq0p")
stat_value = -0.5
metadata/_custom_type_script = "uid://bgka26pbphks7"

[node name="Knockback" type="Node" parent="HitListener"]
script = ExtResource("12_vqv8n")
force = 150.0
metadata/_custom_type_script = "uid://dmjo067f80ntw"

[node name="AbilityPiercingStrike" parent="." instance=ExtResource("12_dua8e")]

[node name="WeaponAbilityAnimatedSprite2D" type="AnimatedSprite2D" parent="." node_paths=PackedStringArray("weapon_anim_sprite", "ability", "weapon")]
sprite_frames = SubResource("SpriteFrames_vqv8n")
animation = &"cast_animation"
script = ExtResource("13_6xb33")
weapon_anim_sprite = NodePath("../AnimatedSprite2D")
ability = NodePath("../AbilityPiercingStrike")
weapon = NodePath("..")
weapon_sprite_visible_on = 3
metadata/_custom_type_script = "uid://cp6un5w7sjul2"
