[gd_scene load_steps=15 format=3 uid="uid://qig4bnksvojg"]

[ext_resource type="Script" uid="uid://df7s4oatxu4hr" path="res://Scripts/Ability System/SpawnAbility.gd" id="1_5ow30"]
[ext_resource type="PackedScene" uid="uid://ct34ut1k53nac" path="res://Scenes/Spawnables/AreaDamageOverTime/slash_field_spawnable.tscn" id="2_57axi"]
[ext_resource type="Script" uid="uid://bgka26pbphks7" path="res://Scripts/StatSystem/Stat.gd" id="3_dlgbv"]
[ext_resource type="Texture2D" uid="uid://b7foa83jkp0jo" path="res://Placeholders/Sprites/SlashFieldIcon.png" id="3_qx142"]
[ext_resource type="Script" uid="uid://tuvjl40jf0pm" path="res://Scripts/Ability System/AbilityRequiredStat/AbilityRequiredStat.gd" id="3_ud00d"]
[ext_resource type="Script" uid="uid://cfltv6h1swg76" path="res://Scripts/StatSystem/AbilityStatScaler.gd" id="4_kpn06"]
[ext_resource type="Script" uid="uid://dm3uuggj1g47y" path="res://Scripts/Combat/HitListener.gd" id="5_7ckw1"]
[ext_resource type="Script" uid="uid://c8sj8b1npavnd" path="res://Scripts/Combat/CombatEffects/DamageEffect.gd" id="6_7axc4"]
[ext_resource type="Script" uid="uid://b41oadkxkerfk" path="res://Scripts/Combat/CombatEffects/BonusValueChecks/DistanceCheck.gd" id="7_ivtg5"]
[ext_resource type="Script" uid="uid://dhhnotv2spmus" path="res://Scripts/Combat/CombatEffects/BonusValueChecks/PercentCurrentHealthCheck.gd" id="8_6m8lt"]
[ext_resource type="Script" uid="uid://88st3pdi1hky" path="res://Scripts/Combat/CombatEffects/ApplyStatusEffect.gd" id="9_jgbyn"]
[ext_resource type="PackedScene" uid="uid://bnklbl3buiiqy" path="res://Scenes/StatusEffects/Slow.tscn" id="10_wdd6k"]

[sub_resource type="Resource" id="Resource_v53ev"]
script = ExtResource("3_ud00d")
stat_name = "current_mana"
required_value = 50.0

[sub_resource type="Curve" id="Curve_ptynb"]
_data = [Vector2(0, 1), 0.0, -0.5, 0, 1]
point_count = 1

[node name="AbilitySlashField" type="Node2D" node_paths=PackedStringArray("hit_listener")]
script = ExtResource("1_5ow30")
max_range = 450.0
spawn = ExtResource("2_57axi")
required_stat = SubResource("Resource_v53ev")
hit_listener = NodePath("HitListener")
cooldown = 60.0
ability_icon_texture = ExtResource("3_qx142")

[node name="Damage" type="Node" parent="."]
script = ExtResource("3_dlgbv")
stat_value = 10.0

[node name="AbilityStatScaler" type="Node" parent="Damage" node_paths=PackedStringArray("ability", "stat")]
script = ExtResource("4_kpn06")
ability = NodePath("../..")
stat_to_scale = "magic_damage"
stat = NodePath("..")
scale_ratio = 0.85

[node name="PercentCurrentHealthDamage" type="Node" parent="."]
script = ExtResource("3_dlgbv")
stat_value = 0.01

[node name="AbilityStatScaler" type="Node" parent="PercentCurrentHealthDamage" node_paths=PackedStringArray("ability", "stat")]
script = ExtResource("4_kpn06")
ability = NodePath("../..")
stat_to_scale = "magic_damage"
stat = NodePath("..")
scale_ratio = 0.001

[node name="HitListener" type="Node" parent="."]
script = ExtResource("5_7ckw1")

[node name="DamageEffect" type="Node" parent="HitListener" node_paths=PackedStringArray("damage_stat")]
script = ExtResource("6_7axc4")
damage_stat = NodePath("../../Damage")
damage_type = 1

[node name="DistanceCheck" type="Node" parent="HitListener/DamageEffect" node_paths=PackedStringArray("stat")]
script = ExtResource("7_ivtg5")
stat = NodePath("../../../Damage")
damage_curve = SubResource("Curve_ptynb")
scaling_ratio = 0.5
relative_to_actor = false

[node name="PercentCurrentHealthCheck" type="Node" parent="HitListener/DamageEffect" node_paths=PackedStringArray("percentage_stat")]
script = ExtResource("8_6m8lt")
percentage_stat = NodePath("../../../PercentCurrentHealthDamage")

[node name="ApplyStatusEffect" type="Node" parent="HitListener"]
script = ExtResource("9_jgbyn")
status_effect_scene = ExtResource("10_wdd6k")
