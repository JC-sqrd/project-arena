[gd_scene load_steps=42 format=3 uid="uid://cvfsmjmaolpet"]

[ext_resource type="Script" path="res://Scripts/Enemy/Enemy.gd" id="1_85oim"]
[ext_resource type="Texture2D" uid="uid://cbwdmsdvh7q6b" path="res://Placeholders/Sprites/Test Character/Character Placeholder Sprite.png" id="2_1peyn"]
[ext_resource type="Shader" path="res://Shaders/test_enemy.gdshader" id="2_gkyh4"]
[ext_resource type="Script" path="res://Scripts/Combat/HitAnimation.gd" id="2_lt8us"]
[ext_resource type="Script" path="res://Scripts/Enemy/AI/FollowPlayer.gd" id="3_ptc11"]
[ext_resource type="Script" path="res://Scripts/StatSystem/StatManager.gd" id="4_5ijs6"]
[ext_resource type="Script" path="res://Scripts/EntitySprite.gd" id="4_h8kdw"]
[ext_resource type="Script" path="res://Scripts/StatSystem/Stat.gd" id="4_j785v"]
[ext_resource type="Script" path="res://Scripts/Enemy/Loot/LootDropManager.gd" id="5_51nyo"]
[ext_resource type="Texture2D" uid="uid://cpg7kaa2t85md" path="res://Placeholders/Sprites/Animation/Attack/HitAnimation/Attack hit marker.png" id="5_jwe64"]
[ext_resource type="PackedScene" uid="uid://cj01qxw0g7t0" path="res://Scenes/Test/exp_orb.tscn" id="6_ra8b0"]
[ext_resource type="Texture2D" uid="uid://c7iewtsox23sg" path="res://Placeholders/Sprites/Animation/Attack/HitAnimation/Hit Marker/frame0000.png" id="6_x5e44"]
[ext_resource type="Texture2D" uid="uid://bvt0giighv5ax" path="res://Placeholders/Sprites/Animation/Attack/HitAnimation/Hit Marker/frame0001.png" id="7_ov2wn"]
[ext_resource type="Texture2D" uid="uid://c16sn36nfwj76" path="res://Placeholders/Sprites/Animation/Attack/HitAnimation/Hit Marker/frame0002.png" id="8_d13gu"]
[ext_resource type="Script" path="res://Scripts/HealthBar.gd" id="8_ypdwx"]
[ext_resource type="Texture2D" uid="uid://b4stxohqkxe4y" path="res://Placeholders/Sprites/Animation/Attack/HitAnimation/Hit Marker/frame0003.png" id="9_agu7s"]
[ext_resource type="Texture2D" uid="uid://evkgstx1vrgd" path="res://Placeholders/Sprites/Animation/Attack/HitAnimation/Hit Marker/frame0004.png" id="10_1whbd"]
[ext_resource type="Texture2D" uid="uid://f8ukp48mceff" path="res://Placeholders/Sprites/Animation/Attack/HitAnimation/Hit Marker/frame0005.png" id="11_1vkgu"]
[ext_resource type="Script" path="res://Scripts/Combat/UI/DamageNumber.gd" id="11_8h80h"]
[ext_resource type="Texture2D" uid="uid://rg8khxkgr6i0" path="res://Placeholders/Sprites/Animation/Attack/HitAnimation/Hit Marker/frame0006.png" id="12_4psk6"]
[ext_resource type="Texture2D" uid="uid://mty87lri11va" path="res://Placeholders/Sprites/Animation/Attack/HitAnimation/Hit Marker/frame0007.png" id="13_ytn3o"]
[ext_resource type="Texture2D" uid="uid://ddh16dnwj061n" path="res://Placeholders/Sprites/Animation/Attack/HitAnimation/Hit Marker/frame0008.png" id="14_0tgo2"]
[ext_resource type="Texture2D" uid="uid://boh7l2hia0nyn" path="res://Placeholders/Sprites/Animation/Attack/HitAnimation/Hit Marker/frame0009.png" id="15_jml50"]
[ext_resource type="Texture2D" uid="uid://cvxbuwbv1di3m" path="res://Placeholders/Sprites/Animation/Attack/HitAnimation/Hit Marker/frame0010.png" id="16_y2hp1"]
[ext_resource type="Texture2D" uid="uid://dtl6ibq8dvo85" path="res://Placeholders/Sprites/Animation/Attack/HitAnimation/Hit Marker/frame0011.png" id="17_5ula7"]
[ext_resource type="Texture2D" uid="uid://5yxrvlqcu88u" path="res://Placeholders/Sprites/Animation/Attack/HitAnimation/Hit Marker/frame0012.png" id="18_6nk6j"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_m21hu"]
resource_local_to_scene = true
shader = ExtResource("2_gkyh4")
shader_parameter/hit_opacity = 0.0

[sub_resource type="AtlasTexture" id="AtlasTexture_wyoix"]
atlas = ExtResource("5_jwe64")
region = Rect2(0, 0, 100, 100)

[sub_resource type="AtlasTexture" id="AtlasTexture_0vqdy"]
atlas = ExtResource("5_jwe64")
region = Rect2(0, 0, 100, 100)

[sub_resource type="AtlasTexture" id="AtlasTexture_ddg7u"]
atlas = ExtResource("5_jwe64")
region = Rect2(100, 0, 100, 100)

[sub_resource type="AtlasTexture" id="AtlasTexture_arnim"]
atlas = ExtResource("5_jwe64")
region = Rect2(200, 0, 100, 100)

[sub_resource type="AtlasTexture" id="AtlasTexture_r1utq"]
atlas = ExtResource("5_jwe64")
region = Rect2(300, 0, 100, 100)

[sub_resource type="AtlasTexture" id="AtlasTexture_toxha"]
atlas = ExtResource("5_jwe64")
region = Rect2(400, 0, 100, 100)

[sub_resource type="AtlasTexture" id="AtlasTexture_agecp"]
atlas = ExtResource("5_jwe64")
region = Rect2(500, 0, 100, 100)

[sub_resource type="AtlasTexture" id="AtlasTexture_gq4qn"]
atlas = ExtResource("5_jwe64")
region = Rect2(600, 0, 100, 100)

[sub_resource type="AtlasTexture" id="AtlasTexture_hiwsu"]
atlas = ExtResource("5_jwe64")
region = Rect2(700, 0, 100, 100)

[sub_resource type="AtlasTexture" id="AtlasTexture_iav3h"]
atlas = ExtResource("5_jwe64")
region = Rect2(800, 0, 100, 100)

[sub_resource type="SpriteFrames" id="SpriteFrames_srgw6"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_wyoix")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_0vqdy")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ddg7u")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_arnim")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_r1utq")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_toxha")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_agecp")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_gq4qn")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_hiwsu")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_iav3h")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_wyoix")
}],
"loop": false,
"name": &"default",
"speed": 12.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("6_x5e44")
}, {
"duration": 1.0,
"texture": ExtResource("7_ov2wn")
}, {
"duration": 1.0,
"texture": ExtResource("8_d13gu")
}, {
"duration": 1.0,
"texture": ExtResource("9_agu7s")
}, {
"duration": 1.0,
"texture": ExtResource("10_1whbd")
}, {
"duration": 1.0,
"texture": ExtResource("11_1vkgu")
}, {
"duration": 1.0,
"texture": ExtResource("12_4psk6")
}, {
"duration": 1.0,
"texture": ExtResource("13_ytn3o")
}, {
"duration": 1.0,
"texture": ExtResource("14_0tgo2")
}, {
"duration": 1.0,
"texture": ExtResource("15_jml50")
}, {
"duration": 1.0,
"texture": ExtResource("16_y2hp1")
}, {
"duration": 1.0,
"texture": ExtResource("17_5ula7")
}, {
"duration": 1.0,
"texture": ExtResource("18_6nk6j")
}],
"loop": false,
"name": &"hit",
"speed": 12.0
}]

[sub_resource type="CircleShape2D" id="CircleShape2D_e4waj"]
radius = 40.0

[sub_resource type="CanvasTexture" id="CanvasTexture_6iw7p"]

[sub_resource type="CanvasTexture" id="CanvasTexture_s8683"]

[node name="Enemy" type="CharacterBody2D" node_paths=PackedStringArray("stat_manager")]
collision_layer = 2
collision_mask = 3
motion_mode = 1
platform_floor_layers = 4294901760
script = ExtResource("1_85oim")
stat_manager = NodePath("Stats")

[node name="Sprite2D" type="Sprite2D" parent="." node_paths=PackedStringArray("entity")]
texture_filter = 1
material = SubResource("ShaderMaterial_m21hu")
position = Vector2(0, 3)
scale = Vector2(0.5, 0.5)
texture = ExtResource("2_1peyn")
script = ExtResource("4_h8kdw")
entity = NodePath("..")

[node name="AnimatedSprite2D" type="AnimatedSprite2D" parent="." node_paths=PackedStringArray("entity")]
texture_filter = 1
scale = Vector2(0.75, 0.75)
sprite_frames = SubResource("SpriteFrames_srgw6")
animation = &"hit"
frame = 12
frame_progress = 1.0
script = ExtResource("2_lt8us")
entity = NodePath("..")

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
position = Vector2(0, -1)
shape = SubResource("CircleShape2D_e4waj")
debug_color = Color(0, 0.6, 0.701961, 0.215686)

[node name="FollowPlayer" type="Node" parent="." node_paths=PackedStringArray("enemy", "speed")]
script = ExtResource("3_ptc11")
enemy = NodePath("..")
speed = NodePath("../Stats/MoveSpeed")

[node name="Stats" type="Node" parent="."]
script = ExtResource("4_5ijs6")

[node name="MoveSpeed" type="Node" parent="Stats"]
script = ExtResource("4_j785v")
stat_name = "move_speed"
stat_value = 150.0

[node name="Health" type="Node" parent="Stats"]
script = ExtResource("4_j785v")
stat_name = "current_health"

[node name="MaxHealth" type="Node" parent="Stats"]
script = ExtResource("4_j785v")
stat_name = "max_health"
stat_value = 100.0

[node name="Armor" type="Node" parent="Stats"]
script = ExtResource("4_j785v")
stat_name = "armor"

[node name="MagicResist" type="Node" parent="Stats"]
script = ExtResource("4_j785v")
stat_name = "magic_resist"
stat_value = 10.0

[node name="LootDropManager" type="Node2D" parent="." node_paths=PackedStringArray("enemy")]
script = ExtResource("5_51nyo")
enemy = NodePath("..")
drops = Array[PackedScene]([ExtResource("6_ra8b0")])

[node name="TextureProgressBar" type="TextureProgressBar" parent="." node_paths=PackedStringArray("under_healthbar")]
offset_left = -44.0
offset_top = 65.0
offset_right = 216.0
offset_bottom = 97.0
scale = Vector2(0.350405, 0.452601)
value = 100.0
rounded = true
nine_patch_stretch = true
texture_progress = SubResource("CanvasTexture_6iw7p")
tint_over = Color(0.733033, 0.400648, 0.905197, 1)
tint_progress = Color(0.159463, 0.705347, 0.338148, 1)
script = ExtResource("8_ypdwx")
under_healthbar = NodePath("TextureProgressBar2")

[node name="TextureProgressBar2" type="TextureProgressBar" parent="TextureProgressBar"]
show_behind_parent = true
layout_mode = 0
offset_right = 742.0
offset_bottom = 70.0
scale = Vector2(0.35, 0.453)
value = 100.0
nine_patch_stretch = true
texture_progress = SubResource("CanvasTexture_s8683")

[node name="HealthLabel" type="Label" parent="."]
offset_left = -28.0
offset_top = 60.0
offset_right = 24.0
offset_bottom = 83.0
text = "Health
"
horizontal_alignment = 1

[node name="DamageNumber" type="Node" parent="." node_paths=PackedStringArray("entity")]
script = ExtResource("11_8h80h")
entity = NodePath("..")
